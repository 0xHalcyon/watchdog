$def with (pol, pos)

$var head: <script src="http://maps.google.com/maps?file=api&amp;v=2&amp;key=ABQIAAAA32O3YO3sztAoMSWYheUtTBQYu38vSyEOJo4J0P8Mwlrd5U_lzhQ2ZoxaOYKY-qh7R36VeBWvCtHU5g" type="text/javascript"></script> <script src="http://www.govtrack.us/scripts/gmap-wms.js"></script> <script src="/static/js/distmap.js"></script> <script type="text/javascript">distcenter('googlemap', '$pol.district.name.replace('-0', '').replace('-', '')', [$pol.district.center_lat, $pol.district.center_lng, $pol.district.zoom_level - 2])</script>

$var title: $pol.firstname $pol.middlename $pol.lastname

$var sidebar: None

$var pretext: <div id="sidebarmap" style="clear: right;"><div id="googlemap" class="sidemap"></div><!--<input type="text" name="zip" class="zipcode" value="Enter your zip" />--></div>
    
<div class="rep-info">
<table class="structure"><tr>

$if pol.photo_path:
    <td><a href="$pol.photo_path"><img src="$pol.photo_path" alt="Headshot" class="headshot" /></a></td>

<td>
<h2 style="padding-top: 0; margin-top: 0">$pol.firstname $pol.middlename $pol.lastname</h2>

<p>
  $if pol.nickname: known as "$pol.nickname"<br />
  $if pol.birthday:
      b. $pol.birthday\
      $if pol.birthplace: , $pol.birthplace\
      <br />
  represents <a href="/us/$pol.district.name">$pol.district.name</a><br />
  $pol.party, $pol.religion<br />
  <a href="$pol.officeurl">Official website</a>
</p>

$if pol.education:
    <p>Education: $pol.education</p>
</td></tr></table>
</div>
<table class="structure">
<tr><td width="50%">
<h2 class="rep">Money</h2>

$def spark(lable, data, polid, by, unit='', url=None):
    <th>$:lable</th>
	$if not data: 
		$ data = 0
    $ display = commify(data) + ' ' + unit
    $if unit == '$':
        $ display = unit + commify(data)
    $elif unit and unit[0] == '%':
        $ display = '%d' % int(abs(data) * 100) + unit
    $if url:
        <td class="sparkdata"><a href="$url">$display</a></td>
    $else:
        <td class="sparkdata">$display</td>
    <td class="sparkline"><a href="/p/by/$by#$polid"
           ><img src="/p/by/$by/distribution.png?point=$data"
                 class="sparkline" /></a></td>
    <td class="sparknum"><sup>(#${pos[by]})</sup></td>

<table class="structure charted"><tbody>
$if pol.money_raised:
    <tr class="even">
      $:spark('Raised', pol.money_raised, pol.id, 'money_raised', '$')
    </tr><tr class="odd">
      $:spark('Spent', pol.pct_spent, pol.id, 'pct_spent', '%')
    </tr><tr class="even">
      $:spark('From self', pol.pct_self, pol.id, 'pct_self', '%')</th>
    </tr><tr class="odd">
      $:spark('From individuals', pol.pct_indiv, pol.id, 'pct_indiv', '%')</th>
    </tr><tr class="even">
      $:spark('From <acronym title="Political Action Committees">PAC</acronym>s', pol.pct_pac, pol.id, 'pct_pac', '%')
    </tr>
$else:
    <tr><th>No information available.</th></tr>
</tbody></table>
</td><td class="width: 50%">
<h2 class="rep">Earmarks</h2>

<table class="charted structure"><tbody>
  <tr class="even">
    $:spark('Requested', pol.n_earmark_requested, pol.id, 'n_earmark_requested', url='/p/'+pol.id+'/earmarks')
  </tr><tr class="odd">
    $:spark('Total cost', pol.amt_earmark_requested, pol.id, 'amt_earmark_requested', '$')
  </tr><tr class="even">
    $:spark('Received', pol.n_earmark_received, pol.id, 'n_earmark_received')
  </tr><tr class="odd">
    $:spark('Total cost', pol.amt_earmark_received, pol.id, 'amt_earmark_received', '$')
  </tr>
  <tr><th colspan="2">Data for fiscal year 2008</th></tr>
</tbody></table>
</td></tr><tr><td width="50%" class="rule">
<h2 class="rep">Bills</h2>

<table class="charted structure"><tbody>
  <tr class="even">
    $:spark('Co-sponsored', pol.n_bills_cosponsored, pol.id, 'n_bills_cosponsored')
  </tr>
  <tr class="odd">
    $:spark('Introduced', pol.n_bills_introduced, pol.id, 'n_bills_introduced', url='/p/'+pol.id+'/introduced')
  </tr>
  <tr class="even">
    $:spark('Debated', pol.n_bills_debated, pol.id, 'n_bills_debated')
  </tr>
  <tr class="odd">
    $:spark('Enacted', pol.n_bills_enacted, pol.id, 'n_bills_enacted')
  </tr>
</tbody></table>
</td><td width="50%" class="rule">
<h2 class="rep">Speeches</h2>

<table class="charted structure"><tbody>
  <tr class="even">
    $:spark('Spoke', pol.n_speeches, pol.id, 'n_speeches', 'times', 'http://www.govtrack.us/congress/person.xpd?tab=speeches&id='+pol.govtrackid)
  </tr><tr class="odd">
    $:spark('Avg. length', pol.words_per_speech, pol.id, 'words_per_speech', 'words')
  </tr>
  <tr><th colspan="2">Data for 110th Congress</th></tr>
</tbody></table>
</td></tr></table>
<h2 class="rep">Voting Analysis</h2>

<table class="charted structure"><tbody>
$if pol.nominate:
    <tr class="even">
    $:spark('Ideology', pol.nominate, pol.id, 'nominate', '% right-wing' if pol.nominate >= 0 else '% left-wing')
    </tr>
$if pol.predictability:
    <tr class="odd">
    $:spark('Predictability', pol.predictability, pol.id, 'predictability', '%')
    </tr>
</tbody></table>

<h2 class="rep">Interest Group Alignment</h2>

<table cellpadding="0" cellspacing="0" width="100%" class="interest_group_agreement">
<tbody><tr><th>Group</th><th>Agreement</th></tr>
$ trclass = "odd"
$for group in pol.related_groups:
    <tr class="$trclass">
      <td>$group.longname</td>
      <td>$int(group.agreement * 100)% (<a href="/p/$pol.id/$group.id">$group.agreed/$group.total votes</a>)</td>
    </tr>
    $if trclass == "odd":
        $ trclass = "even"
    $else:
        $ trclass = "odd"
</tbody></table>

<p><a href="/p/$pol.id/groups">More...</a></p>

<div class="sources">
  Money data from <a href="http://www.fec.gov/">the FEC</a>.
  Politician information from 
  $if pol.votesmartid:
      <a href="http://votesmart.org/bio.php?can_id=$pol.votesmartid"
      >Project Vote Smart</a>,
  <a href="$pol.wikipedia">Wikipedia</a>, 
  and <a 
    href="http://www.govtrack.us/congress/person.xpd?id=$pol.govtrackid"
  >GovTrack</a>.
  Earmark information from <a 
    href="http://taxpayer.net/earmarks.php"
  >Taxpayers for Common Sense</a>.
  Interest group alignment from 
  <a href="http://maplight.org/map/us/legislator">MAPLight.org</a>.
  Ideology and predictability from
  <a href="http://voteview.com/">VoteView</a>.
  $if pol.photo_credit_text:
      Photo from <a href="$pol.photo_credit_url">$pol.photo_credit_text</a>.
  Some campaign finance information from <a 
    href="http://opensecrets.org/politicians/summary.asp?CID=$pol.opensecretsid"
  >Open Secrets</a>. 
</div>

<p><strong>Developers:</strong> Get this page in <a href="${pol.id.lower()}.n3">N3</a>, <a href="${pol.id.lower()}.xml">XML</a>, or <a href="${pol.id.lower()}.json">JSON</a>.</p>

<p><em>Also known as:</em>
  $pol.govtrackid (GovTrack), 
  $pol.opensecretsid (OpenSecrets), 
  $pol.bioguideid (Congressional Bio), 
  $pol.icpsrid (ICPSR), 
  $pol.votesmartid (Vote Smart)\
$if pol.fec_ids:
    , \
    $for fec_id in pol.fec_ids: $fec_id \
    (FEC)\
</p>
